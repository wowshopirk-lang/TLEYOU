import { MoodKey } from "@/stores/moodStore";

export type PracticeType = 'audio' | 'text' | 'video';

export interface Practice {
  id: string;
  type: PracticeType;
  mood: MoodKey;
  index: number; // 0 или 1 (первая или вторая практика для настроения)
  title: string;
  subtitle: string;
  description: string;
  duration: string;
  durationSeconds: number; // для отслеживания прогресса
  category: string;
  color: string;
  steps: string[];
  // Для audio практик
  audioUrl?: string;
  // Для text практик  
  textContent?: string[];
  reflectionQuestions?: string[];
  // Для video практик
  videoUrl?: string;
  images?: string[];
  weekNumber?: number; // для еженедельного обновления
}

// Получить номер недели года
const getWeekNumber = (): number => {
  const now = new Date();
  const start = new Date(now.getFullYear(), 0, 1);
  const diff = now.getTime() - start.getTime();
  const oneWeek = 1000 * 60 * 60 * 24 * 7;
  return Math.floor(diff / oneWeek) + 1;
};

export const practices: Practice[] = [
  // ============ RADIANT ============
  {
    id: "radiant-0",
    type: "audio",
    mood: "radiant",
    index: 0,
    title: "Медитация благодарности",
    subtitle: "Усиль позитив",
    description: "Аудио-практика для усиления позитивных эмоций и чувства благодарности. Помогает закрепить хорошее настроение и увидеть красоту вокруг.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Медитация",
    color: "#b49b78",
    audioUrl: "/audio/meditation-gratitude.mp3", // placeholder
    steps: [
      "Найди удобное место и закрой глаза",
      "Следуй голосовым инструкциям",
      "Позволь благодарности наполнить тебя",
    ],
  },
  {
    id: "radiant-1",
    type: "video",
    mood: "radiant",
    index: 1,
    title: "Энергичная йога",
    subtitle: "15 минут движения",
    description: "Видео-практика с короткой последовательностью движений для выплеска энергии и укрепления связи с телом.",
    duration: "15 мин",
    durationSeconds: 900,
    category: "Движение",
    color: "#b49b78",
    videoUrl: "/videos/yoga-energetic.mp4", // placeholder
    steps: [
      "Встань прямо, ноги на ширине плеч. Подними руки вверх, потянись.",
      "Наклонись вперёд, опусти руки к полу. Дыши глубоко.",
      "Поднимись, руки в стороны. Повернись вправо, затем влево.",
      "Сделай несколько приседаний, чувствуя силу в ногах.",
      "Вернись в центр. Подними руки вверх, почувствуй энергию.",
      "Закончи, стоя спокойно. Почувствуй, как энергия течёт по телу.",
    ],
  },

  // ============ CALM ============
  {
    id: "calm-0",
    type: "audio",
    mood: "calm",
    index: 0,
    title: "Дыхательная практика",
    subtitle: "5 минут покоя",
    description: "Аудио-гид для простой техники дыхания и глубокого расслабления.",
    duration: "5 мин",
    durationSeconds: 300,
    category: "Дыхание",
    color: "#7a9ebb",
    audioUrl: "/audio/breathing-calm.mp3",
    steps: [
      "Сядь или ляг удобно",
      "Следуй ритму дыхания в аудио",
      "Почувствуй, как покой наполняет тебя",
    ],
  },
  {
    id: "calm-1",
    type: "audio",
    mood: "calm",
    index: 1,
    title: "Тело-сканирование",
    subtitle: "Расслабление",
    description: "Медленное осознанное сканирование тела от макушки до пальцев ног для глубокого расслабления.",
    duration: "12 мин",
    durationSeconds: 720,
    category: "Медитация",
    color: "#7a9ebb",
    audioUrl: "/audio/body-scan.mp3",
    steps: [
      "Ляг удобно, закрой глаза",
      "Следуй голосовым инструкциям",
      "Расслабляй каждую часть тела по очереди",
    ],
  },

  // ============ BALANCED ============
  {
    id: "balanced-0",
    type: "text",
    mood: "balanced",
    index: 0,
    title: "Осознанная прогулка",
    subtitle: "10 минут на воздухе",
    description: "Текстовая инструкция для медитации в движении, которая помогает найти баланс между активностью и покоем.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Движение",
    color: "#b49b78",
    textContent: [
      "Выйди на улицу или в тихое место. Иди медленно, не спеша.",
      "Ощути каждый шаг. Как стопа касается земли? Какие ощущения в ногах?",
      "Обрати внимание на дыхание. Позволь ему синхронизироваться с шагами.",
      "Смотри вокруг. Что ты видишь? Замечай цвета, формы, движение листьев.",
      "Прислушайся к звукам вокруг. Не анализируй, просто слушай.",
      "Почувствуй воздух на коже. Какая температура? Есть ли ветер?",
      "Продолжай идти, сохраняя осознанность каждого момента.",
      "Заверши прогулку, остановившись на месте. Почувствуй стабильность.",
    ],
    reflectionQuestions: [
      "Что нового ты заметила во время прогулки?",
      "Как изменилось твоё состояние после практики?",
      "Какой момент был самым приятным?",
    ],
    steps: [
      "Прочитай каждый шаг и выполни его",
      "Не торопись, дай себе время",
      "Ответь на вопросы для рефлексии",
    ],
  },
  {
    id: "balanced-1",
    type: "text",
    mood: "balanced",
    index: 1,
    title: "Журналирование",
    subtitle: "Запиши свои мысли",
    description: "Практика письма для структурирования мыслей и нахождения равновесия.",
    duration: "7 мин",
    durationSeconds: 420,
    category: "Рефлексия",
    color: "#b49b78",
    textContent: [
      "Возьми блокнот и ручку. Сядь удобно в тихом месте.",
      "Запиши: «Что я чувствую прямо сейчас?» Пиши свободно, без редактирования.",
      "Запиши: «Что приносит мне стабильность?» Перечисли 3-5 вещей.",
      "Запиши: «Что выводит меня из равновесия?» Будь честна с собой.",
      "Запиши: «Как я могу вернуть баланс?» Один конкретный шаг.",
      "Перечитай написанное. Что ты замечаешь в своих словах?",
      "Закрой блокнот. Ты лучше понимаешь себя.",
    ],
    reflectionQuestions: [
      "Что удивило тебя в твоих записях?",
      "Какой один шаг ты сделаешь сегодня?",
    ],
    steps: [
      "Читай инструкции по одной",
      "Пиши честно, не редактируя",
      "Перечитай и осмысли",
    ],
  },

  // ============ TENDER ============
  {
    id: "tender-0",
    type: "audio",
    mood: "tender",
    index: 0,
    title: "Самосострадание",
    subtitle: "Будь добра к себе",
    description: "Аудио-медитация для практики доброты к себе, когда тебе грустно или тяжело.",
    duration: "8 мин",
    durationSeconds: 480,
    category: "Медитация",
    color: "#9a8fb5",
    audioUrl: "/audio/self-compassion.mp3",
    steps: [
      "Найди уединённое место",
      "Положи руку на сердце",
      "Следуй голосовым инструкциям с добротой к себе",
    ],
  },
  {
    id: "tender-1",
    type: "text",
    mood: "tender",
    index: 1,
    title: "Тёплое обнимание",
    subtitle: "Практика заботы",
    description: "Физическая практика самоподдержки через объятия и тепло.",
    duration: "5 мин",
    durationSeconds: 300,
    category: "Телесная практика",
    color: "#9a8fb5",
    textContent: [
      "Сядь или ляг в удобном месте. Можно укрыться пледом.",
      "Обними себя крепко, скрестив руки на груди. Почувствуй тепло своих рук.",
      "Слегка покачайся из стороны в сторону. Как мама качает ребёнка.",
      "Погладь себя по рукам, по плечам. Нежно, с заботой и любовью.",
      "Скажи себе тихо: «Всё будет хорошо. Я с тобой. Ты в безопасности.»",
      "Оставайся в объятиях столько, сколько тебе нужно.",
      "Когда будешь готова, медленно отпусти. Поблагодари себя за эту заботу.",
    ],
    reflectionQuestions: [
      "Как ты себя чувствуешь после практики?",
      "Что ещё ты можешь сделать для себя сегодня?",
    ],
    steps: [
      "Читай и выполняй каждый шаг",
      "Не торопись, будь нежна с собой",
      "Позволь себе чувствовать",
    ],
  },

  // ============ TIRED ============
  {
    id: "tired-0",
    type: "audio",
    mood: "tired",
    index: 0,
    title: "Глубокое расслабление",
    subtitle: "Восстанови силы",
    description: "Аудио-практика для восстановления энергии и глубокого отдыха.",
    duration: "15 мин",
    durationSeconds: 900,
    category: "Релаксация",
    color: "#a08090",
    audioUrl: "/audio/deep-relaxation.mp3",
    steps: [
      "Ляг удобно, укройся пледом",
      "Закрой глаза и отпусти напряжение",
      "Позволь голосу вести тебя к отдыху",
    ],
  },
  {
    id: "tired-1",
    type: "video",
    mood: "tired",
    index: 1,
    title: "Мягкая растяжка",
    subtitle: "5 минут нежности",
    description: "Видео с лёгкими движениями для снятия напряжения и пробуждения тела.",
    duration: "5 мин",
    durationSeconds: 300,
    category: "Движение",
    color: "#a08090",
    videoUrl: "/videos/gentle-stretch.mp4",
    steps: [
      "Встань или сядь. Начни с медленных поворотов головы.",
      "Подними плечи к ушам, задержи, опусти. Повтори 3 раза.",
      "Вытяни руки в стороны, потянись. Медленно опусти.",
      "Наклонись вперёд, позволь рукам свисать. Покачайся немного.",
      "Медленно поднимись. Потянись вверх, как будто тянешься к солнцу.",
      "Сделай несколько глубоких вдохов. Почувствуй, как тело оживает.",
    ],
  },

  // ============ ANXIOUS ============
  {
    id: "anxious-0",
    type: "text",
    mood: "anxious",
    index: 0,
    title: "Заземление 5-4-3-2-1",
    subtitle: "Вернись в момент",
    description: "Техника заземления для возвращения в настоящий момент и снижения тревоги.",
    duration: "5 мин",
    durationSeconds: 300,
    category: "Заземление",
    color: "#c49b88",
    textContent: [
      "Сядь или встань устойчиво. Сделай глубокий вдох и выдох.",
      "Назови 5 вещей, которые ты ВИДИШЬ прямо сейчас. Смотри внимательно вокруг.",
      "Назови 4 вещи, которые ты можешь ПОТРОГАТЬ. Прикоснись к ним.",
      "Назови 3 вещи, которые ты СЛЫШИШЬ. Прислушайся к окружению.",
      "Назови 2 вещи, которые ты можешь ПОНЮХАТЬ. Вдохни глубже.",
      "Назови 1 вещь, которую ты можешь ПОПРОБОВАТЬ на вкус.",
      "Сделай ещё один глубокий вдох. Ты здесь, в этом моменте, в безопасности.",
    ],
    reflectionQuestions: [
      "Как изменились твои ощущения?",
      "Что помогло тебе больше всего?",
    ],
    steps: [
      "Выполняй каждый шаг не торопясь",
      "Называй вещи вслух или про себя",
      "Сосредоточься на ощущениях",
    ],
  },
  {
    id: "anxious-1",
    type: "audio",
    mood: "anxious",
    index: 1,
    title: "Дыхание 4-7-8",
    subtitle: "Успокой нервную систему",
    description: "Аудио-гид для техники дыхания, которая быстро успокаивает нервную систему.",
    duration: "4 мин",
    durationSeconds: 240,
    category: "Дыхание",
    color: "#c49b88",
    audioUrl: "/audio/breathing-478.mp3",
    steps: [
      "Сядь прямо в удобной позе",
      "Следуй ритму дыхания в аудио",
      "Повтори 4 цикла дыхания",
    ],
  },

  // ============ INSPIRED ============
  {
    id: "inspired-0",
    type: "audio",
    mood: "inspired",
    index: 0,
    title: "Визуализация цели",
    subtitle: "Представь результат",
    description: "Аудио-медитация для усиления вдохновения и чёткого видения желаемого результата.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Визуализация",
    color: "#88b5a0",
    audioUrl: "/audio/visualization-goal.mp3",
    steps: [
      "Сядь удобно, закрой глаза",
      "Следуй голосовым инструкциям",
      "Представь свою цель во всех деталях",
    ],
  },
  {
    id: "inspired-1",
    type: "text",
    mood: "inspired",
    index: 1,
    title: "Креативная медитация",
    subtitle: "Поток идей",
    description: "Практика для раскрытия творческого потенциала и потока идей.",
    duration: "8 мин",
    durationSeconds: 480,
    category: "Творчество",
    color: "#88b5a0",
    textContent: [
      "Возьми блокнот или чистый лист бумаги и ручку.",
      "Закрой глаза на минуту. Дыши глубоко. Представь, как вдохновение входит с каждым вдохом.",
      "Открой глаза. Начни писать или рисовать всё, что приходит в голову. 5 минут без остановки.",
      "Не редактируй, не критикуй. Просто поток сознания.",
      "Остановись. Посмотри на то, что создала. Не оценивай.",
      "Выдели 3 идеи или элемента, которые тебе нравятся больше всего.",
      "Выбери одну идею и подумай: какой первый шаг к её реализации?",
    ],
    reflectionQuestions: [
      "Какая идея вызвала больше всего энтузиазма?",
      "Что нового ты узнала о себе?",
    ],
    steps: [
      "Пиши/рисуй без остановки",
      "Не критикуй свои идеи",
      "Выбери одну для действия",
    ],
  },

  // ============ GRATEFUL ============
  {
    id: "grateful-0",
    type: "text",
    mood: "grateful",
    index: 0,
    title: "Список благодарности",
    subtitle: "Запиши 5 вещей",
    description: "Практика письменной благодарности для усиления чувства изобилия.",
    duration: "7 мин",
    durationSeconds: 420,
    category: "Рефлексия",
    color: "#b5a888",
    textContent: [
      "Возьми блокнот или лист бумаги. Сядь в спокойном месте.",
      "Запиши заголовок: «За что я благодарна сегодня?»",
      "Напиши 5 вещей. Они могут быть большими или совсем маленькими.",
      "Около каждой вещи напиши 1-2 предложения — почему ты за неё благодарна.",
      "Перечитай свой список медленно. Почувствуй благодарность в теле.",
      "Положи руку на сердце. Поблагодари себя за то, что ты видишь хорошее в жизни.",
      "Сохрани этот список. Возвращайся к нему, когда нужна поддержка.",
    ],
    reflectionQuestions: [
      "Как изменилось твоё настроение после практики?",
      "Какая благодарность была самой неожиданной?",
    ],
    steps: [
      "Пиши от сердца",
      "Не торопись с каждым пунктом",
      "Почувствуй благодарность телом",
    ],
  },
  {
    id: "grateful-1",
    type: "audio",
    mood: "grateful",
    index: 1,
    title: "Медитация изобилия",
    subtitle: "Ощути полноту жизни",
    description: "Аудио-медитация для ощущения изобилия и полноты жизни.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Медитация",
    color: "#b5a888",
    audioUrl: "/audio/abundance-meditation.mp3",
    steps: [
      "Сядь удобно, закрой глаза",
      "Положи руки на колени ладонями вверх",
      "Следуй голосовым инструкциям",
    ],
  },

  // ============ ENERGETIC ============
  {
    id: "energetic-0",
    type: "video",
    mood: "energetic",
    index: 0,
    title: "Динамическая практика",
    subtitle: "Выплесни энергию",
    description: "Видео с активной практикой для направления энергии в движение и действие.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Движение",
    color: "#e5a855",
    videoUrl: "/videos/dynamic-practice.mp4",
    steps: [
      "Встань. Ноги на ширине плеч. Сделай несколько прыжков на месте.",
      "Подними руки вверх, потянись. Опусти, наклонись вперёд.",
      "Делай круговые движения руками. Сначала вперёд, потом назад.",
      "Повернись вправо, затем влево. Двигайся свободно.",
      "Попрыгай ещё раз. Почувствуй энергию в теле.",
      "Остановись. Подними руки вверх, глубоко вдохни.",
      "Выдохни, опусти руки. Энергия направлена, ты готова действовать.",
    ],
  },
  {
    id: "energetic-1",
    type: "audio",
    mood: "energetic",
    index: 1,
    title: "Танцевальная медитация",
    subtitle: "Двигайся свободно",
    description: "Аудио-гид для свободного движения под музыку и выражения энергии.",
    duration: "8 мин",
    durationSeconds: 480,
    category: "Движение",
    color: "#e5a855",
    audioUrl: "/audio/dance-meditation.mp3",
    steps: [
      "Найди пространство для движения",
      "Включи аудио и начни двигаться",
      "Не думай, просто чувствуй музыку",
    ],
  },

  // ============ PEACEFUL ============
  {
    id: "peaceful-0",
    type: "audio",
    mood: "peaceful",
    index: 0,
    title: "Созерцательная практика",
    subtitle: "Наслаждайся тишиной",
    description: "Аудио-медитация для углубления состояния покоя и тишины.",
    duration: "12 мин",
    durationSeconds: 720,
    category: "Медитация",
    color: "#6b9b8a",
    audioUrl: "/audio/contemplative-meditation.mp3",
    steps: [
      "Сядь или ляг в тихом месте",
      "Закрой глаза и расслабься",
      "Позволь тишине окружить тебя",
    ],
  },
  {
    id: "peaceful-1",
    type: "text",
    mood: "peaceful",
    index: 1,
    title: "Медитация на природе",
    subtitle: "Единение с миром",
    description: "Текстовая практика для ощущения единства с природой и миром.",
    duration: "15 мин",
    durationSeconds: 900,
    category: "Медитация",
    color: "#6b9b8a",
    textContent: [
      "Выйди на природу или сядь у открытого окна. Найди удобное положение.",
      "Закрой глаза. Прислушайся к звукам природы — птицы, ветер, шелест листьев.",
      "Почувствуй воздух на коже. Он такой же, каким дышали твои предки тысячи лет назад.",
      "Представь, как ты связана со всем вокруг — деревьями, небом, землёй.",
      "Ты часть этого мира. Мир — часть тебя. Вы неразделимы.",
      "Почувствуй это единство глубоко внутри. Ты не одинока во вселенной.",
      "Оставайся в этом ощущении связи столько, сколько хочется.",
      "Медленно открой глаза. Посмотри на мир по-новому.",
    ],
    reflectionQuestions: [
      "Что ты почувствовала, ощутив связь с природой?",
      "Как это понимание может изменить твой день?",
    ],
    steps: [
      "Найди тихое место на природе",
      "Читай и выполняй медленно",
      "Позволь себе просто быть",
    ],
  },

  // ============ CONFUSED ============
  {
    id: "confused-0",
    type: "audio",
    mood: "confused",
    index: 0,
    title: "Практика ясности",
    subtitle: "Найди ответы внутри",
    description: "Аудио-медитация для прояснения мыслей и нахождения ясности.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Медитация",
    color: "#9b8b7a",
    audioUrl: "/audio/clarity-meditation.mp3",
    steps: [
      "Сядь в тихом месте",
      "Сформулируй один главный вопрос",
      "Позволь ответу прийти во время медитации",
    ],
  },
  {
    id: "confused-1",
    type: "text",
    mood: "confused",
    index: 1,
    title: "Письмо себе",
    subtitle: "Разберись в мыслях",
    description: "Практика письма для структурирования мыслей и нахождения ясности.",
    duration: "8 мин",
    durationSeconds: 480,
    category: "Рефлексия",
    color: "#9b8b7a",
    textContent: [
      "Возьми блокнот и ручку. Начни писать: «Дорогая я...»",
      "Опиши, что тебя запутывает. Пиши свободно, без редактирования, всё подряд.",
      "Запиши все вопросы, которые крутятся в голове. Не отвечай на них пока.",
      "Теперь представь, что отвечаешь себе — мудрой подруге. Что ты на самом деле думаешь?",
      "Запиши: «Что я знаю точно?» Перечисли факты, в которых уверена.",
      "Запиши: «Чего я не знаю?» Будь честна с собой.",
      "Запиши: «Что я могу сделать прямо сейчас?» Один конкретный маленький шаг.",
      "Перечитай письмо. Ты стала яснее понимать ситуацию.",
    ],
    reflectionQuestions: [
      "Какой ответ удивил тебя больше всего?",
      "Какой один шаг ты сделаешь сегодня?",
    ],
    steps: [
      "Пиши честно, не цензурируя",
      "Отвечай себе с добротой",
      "Выбери один шаг для действия",
    ],
  },
];

// ============ LIBRARY PRACTICES (для библиотеки практик) ============
export const libraryPractices: Practice[] = [
  {
    id: "lib-breathing-478",
    type: "audio",
    mood: "calm",
    index: 100,
    title: "Дыхание 4-7-8",
    subtitle: "Техника успокоения",
    description: "Техника для быстрого успокоения и снятия тревоги. Доказанный метод активации парасимпатической нервной системы.",
    duration: "5 мин",
    durationSeconds: 300,
    category: "Дыхание",
    color: "#7a9ebb",
    audioUrl: "/audio/breathing-478.mp3",
    steps: [
      "Сядь прямо, язык за верхними зубами",
      "Вдох через нос на 4 счёта",
      "Задержка на 7 счётов",
      "Выдох через рот на 8 счётов",
      "Повтори 4 цикла",
    ],
    weekNumber: 1,
  },
  {
    id: "lib-morning-meditation",
    type: "audio",
    mood: "balanced",
    index: 101,
    title: "Утренняя медитация",
    subtitle: "Начни день осознанно",
    description: "Начни день с ясностью и фокусом. Идеальная практика для утреннего ритуала.",
    duration: "10 мин",
    durationSeconds: 600,
    category: "Медитация",
    color: "#b49b78",
    audioUrl: "/audio/morning-meditation.mp3",
    steps: [
      "Сядь удобно сразу после пробуждения",
      "Установи намерение на день",
      "Следуй голосовым инструкциям",
    ],
    weekNumber: 1,
  },
  {
    id: "lib-gratitude",
    type: "text",
    mood: "grateful",
    index: 102,
    title: "Практика благодарности",
    subtitle: "5 минут позитива",
    description: "Практика для позитивного настроя и осознанности. Научно доказано повышает уровень счастья.",
    duration: "7 мин",
    durationSeconds: 420,
    category: "Осознанность",
    color: "#9a8fb5",
    textContent: [
      "Найди тихое место и закрой глаза на минуту.",
      "Вспомни три вещи, за которые ты благодарна сегодня.",
      "Запиши их в блокнот или заметки.",
      "Для каждой вещи напиши, почему она важна для тебя.",
      "Перечитай и почувствуй благодарность в теле.",
    ],
    reflectionQuestions: [
      "Какая благодарность вызвала самые сильные эмоции?",
      "Как ты можешь выразить эту благодарность?",
    ],
    steps: [
      "Вспомни три вещи",
      "Запиши их",
      "Почувствуй благодарность",
    ],
    weekNumber: 1,
  },
  {
    id: "lib-sleep-relaxation",
    type: "audio",
    mood: "peaceful",
    index: 103,
    title: "Релаксация перед сном",
    subtitle: "Глубокий отдых",
    description: "Отпусти напряжение дня и подготовься к качественному сну.",
    duration: "15 мин",
    durationSeconds: 900,
    category: "Сон",
    color: "#5f7a9e",
    audioUrl: "/audio/sleep-relaxation.mp3",
    steps: [
      "Ляг в постель",
      "Выключи все экраны",
      "Следуй голосовому гиду к глубокому сну",
    ],
    weekNumber: 1,
  },
  {
    id: "lib-body-scan",
    type: "audio",
    mood: "calm",
    index: 104,
    title: "Сканирование тела",
    subtitle: "Полное расслабление",
    description: "Осознанное расслабление каждой части тела от макушки до пальцев ног.",
    duration: "12 мин",
    durationSeconds: 720,
    category: "Медитация",
    color: "#8fb583",
    audioUrl: "/audio/body-scan-full.mp3",
    steps: [
      "Ляг удобно на спину",
      "Закрой глаза",
      "Следуй инструкциям, расслабляя каждую часть тела",
    ],
    weekNumber: 1,
  },
  {
    id: "lib-box-breathing",
    type: "video",
    mood: "anxious",
    index: 105,
    title: "Квадратное дыхание",
    subtitle: "Техника Navy SEALs",
    description: "Сбалансируй свой ритм и найди внутренний покой. Используется специальными подразделениями для контроля стресса.",
    duration: "8 мин",
    durationSeconds: 480,
    category: "Дыхание",
    color: "#7a9ebb",
    videoUrl: "/videos/box-breathing.mp4",
    steps: [
      "Вдох на 4 счёта",
      "Задержка на 4 счёта",
      "Выдох на 4 счёта",
      "Задержка на 4 счёта",
      "Повтори 6-8 циклов",
    ],
    weekNumber: 2,
  },
];

// Helper functions
export const getPracticeById = (id: string): Practice | undefined => {
  return [...practices, ...libraryPractices].find(p => p.id === id);
};

export const getPracticesByMood = (mood: MoodKey): Practice[] => {
  return practices.filter(p => p.mood === mood);
};

export const getPracticeByMoodAndIndex = (mood: MoodKey, index: number): Practice | undefined => {
  return practices.find(p => p.mood === mood && p.index === index);
};

export const getPracticesByType = (type: PracticeType): Practice[] => {
  return [...practices, ...libraryPractices].filter(p => p.type === type);
};

export const getLibraryPractices = (): Practice[] => {
  return libraryPractices;
};

export const getLibraryPracticesForCurrentWeek = (): Practice[] => {
  const currentWeek = getWeekNumber();
  // Показываем практики текущей недели + все предыдущие
  return libraryPractices.filter(p => !p.weekNumber || p.weekNumber <= currentWeek);
};

export const getAllPractices = (): Practice[] => {
  return [...practices, ...libraryPractices];
};

// Получить 7 практик текущей недели (меняются каждую неделю)
export const getWeeklyPractices = (): Practice[] => {
  const allPractices = getAllPractices();
  const currentWeek = getWeekNumber();
  
  // Используем номер недели как seed для псевдослучайного выбора
  // Это гарантирует, что практики будут одинаковыми в течение недели
  const shuffled = [...allPractices].sort((a, b) => {
    const hashA = (a.id.charCodeAt(0) + currentWeek * 7) % allPractices.length;
    const hashB = (b.id.charCodeAt(0) + currentWeek * 7) % allPractices.length;
    return hashA - hashB;
  });
  
  // Возвращаем первые 7 практик
  return shuffled.slice(0, 7);
};

export { getWeekNumber };
